@addTagHelper *, TheTallTankardTavern
@model TheTallTankardTavern.Models.PartyModel
@using TheTallTankardTavern.Configuration

@{
    ViewData["Title"] = "Party";
}

<h1>@ViewData["Title"]</h1>

<div class="row">
    <div class="col-md-3">
        <strong>Date (See <a asp-controller="Appendix" asp-action="Calendar">Calendar</a>):</strong>
        @if (ContextUser.IsAdminOrDM)
        {
            <textbox style="font-style:italic" asp-for="Date" oninput="quickSaveDate(this)"></textbox>
        }
        else
        {
            <label style="font-style:italic;font-weight:normal;font-size:small">@Model.Date</label>
        }
    </div>
    <div class="col-md-5">
        <buttonlink class="font-weight-bold" asp-action="Index" text="Refresh Page"></buttonlink>
        &nbsp;&nbsp;
        @if (ContextUser.IsAdminOrDM)
        {
            <buttonlink class="font-weight-bold" asp-action="ResetInitiative" text="Reset Initiative"></buttonlink>
            <span>&nbsp;&nbsp;</span>
        }
        <em id="auto-save-message"></em>
    </div>
    <div class="col-md-4">
        <partial name="/Views/Party/_PartyMemberAdd.cshtml" model="Model" />
    </div>
</div>
<br />
<div class="row" id="party">
    <div class="col-md-12">
        <partial name="/Views/Party/_PartyTable.cshtml" model="Model" />
    </div>
</div>
<div class="row">
    <div class="col-md-3">
        <ul style="list-style-type:none;list-style-position:">
            <li><strong>Related Information</strong></li>
            <li><a asp-controller="Appendix" asp-action="Combat">Combat: Order &amp; Actions</a></li>
            <li><a href="https://www.dndbeyond.com/sources/basic-rules/appendix-a-conditions">Conditions</a></li>
            <li><a href="https://www.dndbeyond.com/sources/basic-rules/adventuring#ShortRest">Short Rests</a></li>
            <li><a href="https://www.dndbeyond.com/sources/basic-rules/adventuring#LongRest">Long Rests</a></li>
        </ul>
    </div>
    <div class="col-md-4">
        <strong>Exhaustion</strong> <em style="font-size:small">(Reduce one level of exhaustion per long rest)</em>
        <table>
            <tr>
                <th>Level</th>
                <th>Effect</th>
            </tr>
            <tr>
                <td>1</td>
                <td>Disadvantage on ability checks</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Speed halved</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Disadvantage on attack rolls and saving throws</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Hit point maximum halved</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Speed reduced to 0</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Death</td>
            </tr>
        </table>
    </div>
</div>